<?xml version="1.0" encoding="utf-8"?>
<AssetDeclaration xmlns="uri:ea.com:eala:asset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xi="http://www.w3.org/2001/XInclude">
	<Tags></Tags>
	<Includes>
		<Include
			type="all"
			source="DATA:GlobalData/GlobalDefines.xml" />
		<Include
			type="all"
			source="ART:NBEngFa.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaBld_SKN.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFaBld_AAN.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFaDoor_SKL.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor_SKN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoorD2_SKN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor03D2_CLS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor03D2_OPNS.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFaDoor03_CLS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor03_CLSS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor03_OPN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor03_OPNS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01_CLS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01_CLSS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01_OPN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01_OPNS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01D2_SKN.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFaDoor01D2_CLS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01D2_CLSS.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01D2_OPN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoor01D2_OPNS.w3x" />			
		<Include
			type="all"
			source="ART:NURedmrBLDA_SKN.w3x" />
		<Include
			type="all"
			source="ART:NURedeemer_BLDA.w3x" />
		<Include
			type="all"
			source="ART:NURedmrBLDA_D2SKN.w3x" />
		<Include
			type="all"
			source="ART:NURedmrBLDA_D2AAN.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFac_LF.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaD2_AAN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaD2_SKN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaD2Base_AAN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaD2Base_SKN.w3x" />	
		<Include
			type="all"
			source="ART:NBEngFaD2Base_END.w3x" />			
		<Include
			type="all"
			source="ART:NBEngFaDoorsD2_AAN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaDoorsD2_SKN.w3x" />		
		<Include
			type="all"
			source="ART:NBEngFaDoorsD2Open.w3x" />				
		<Include
			type="all"
			source="ART:NBEngFaD3_AAN.w3x" />
		<Include
			type="all"
			source="ART:NBEngFaD3_SKN.w3x" />
		<Include
			type="all"
			source="ART:NB_EngFaD.xml" />

		<Include
			type="all"
			source="ART:NBEmpty_ABLD.w3x" />
		<Include
			type="all"
			source="ART:NB_DropZoneD.xml" />
		<Include
			type="all"
			source="ART:FXInvisBone.w3x" />
		<Include
			type="all"	
			source="ART:Decal_Rig_CO.xml" />
		<!-- Base Object -->
		<Include
			type="instance"
			source="DATA:BaseObjects/BaseStructure.xml" />
	</Includes>
	<GameObject
		id="MG_NOD_WarmechFacility"
		inheritFrom="BaseStructure"
		SelectPortrait="Portrait_WarmechFacility"
		ButtonImage="Portrait_WarmechFacility"
		Side="NOD"
		EditorSorting="STRUCTURE"
		TransportSlotCount="1"
		BuildCost="3000"
		BuildTime="30"
		EnergyProduction="-10"
		CommandSet="NODWarmechFacilityCommandSet"
		Browser="REGION METAGAME NOD"		
		KindOf="STRUCTURE SELECTABLE UNIQUE_UNIT IMMOBILE CAN_CAST_REFLECTIONS FS_FACTORY AUTO_RALLYPOINT FS_WAR_FACTORY NOT_AUTOACQUIRABLE AUTO_ACQUIRABLE_BY_AI COVER"
		RadarPriority="STRUCTURE"
		PlacementViewAngle="225d"
		ProductionQueueType="MAIN_STRUCTURE"
		BuildPlacementTypeFlag="MAIN_STRUCTURE"
		EditorName="NODWarmechFacility"
		Description="Desc:NODWarmechFacility"
		TypeDescription="Type:NODWarmechFacility"
		MaxSimultaneousOfType="1">
		<DisplayName
			xai:joinAction="Replace" xmlns:xai="uri:ea.com:eala:asset:instance">Name:NODWarmechFacility</DisplayName>
		<GameDependency>
				<RequiredObject>NODTechAssemblyPlant</RequiredObject>
		</GameDependency>
		<ArmorSet
			Armor="NODWarmechEngFacilityArmor"
			DamageFX="FactionStructureDamageFX" />
		<ArmorSet
			Conditions="PLAYER_UPGRADE"
			Armor="NODWarmechEngFacilityLaserFencingArmor"
			DamageFX="NormalDamageFX" />			
		<SkirmishAIInformation
			BaseBuildingLocation="FRONT" />
		<Draws>
			<ScriptedModelDraw
				id="ModuleTag_Draw"
				OkToChangeModelColor="true">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
					<Model
						Name="NBEngFa" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
					<Model
						Name="NBEngFaBld_SKN" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DAMAGED">
					<Model
						Name="NBEngFa" />
					<Texture
						Original="NBWEFacility"
						New="NBEngFaD" />						
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED">
					<Model
						Name="NBEngFaD2Base_SKN" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DYING">
					<Model
						Name="NBEngFaD3_SKN" />
				</ModelConditionState>
				<!-- BUILDUP ANIMATION -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
					<Animation
						AnimationName="NBEngFaBld_AAN"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="NONE"
						FXParticleSystemTemplate="Con_Large"
						FollowBone="true" />
				</AnimationState>
<!-- Was NBDrpZnD2_AN -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DAMAGED"
					StateName="STATE_Damaged"
					Flags="START_FRAME_FIRST">
				<!-- no animation -->
				</AnimationState>
<!-- Was NBDrpZnD2_AAN -->	<!-- REALLY DAMAGED ANIMATION 
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED">
					<Animation
						AnimationName="NBEngFaD2Base_AAN"
						AnimationMode="ONCE" />
				</AnimationState>-->
				<!-- DYING ANIMATION -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DYING">
					<Animation
						AnimationName="NBEngFaD3_AAN"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="NONE"
						FXParticleSystemTemplate="Des_Large"
						FollowBone="false" />
				</AnimationState>
				<!-- Transitions 
				<AnimationState
					ParseCondStateType="PARSE_TRANSITION"
					StateName="TRANS_DamagedToReallyDamaged">
					<Animation
						AnimationName="NBEngFaD2Base_AAN"
						AnimationMode="ONCE" />
				</AnimationState>
				-->
			</ScriptedModelDraw>
			
			<!-- DRAW DOOR01 -->
			<ScriptedModelDraw
				id="ModuleTag_Draw_Door"
				OkToChangeModelColor="true">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
					<Model
						Name="NBEngFaDoor_SKN" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
					<Model
						Name="NBEmpty_ABLD" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_OPENING BUILDING_A_METAUNIT">
					<Model
						Name="NURedmrBLDA_D2SKN" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_WAITING_OPEN BUILDING_A_METAUNIT">
					<Model
						Name="NBEngFaDoorD2_SKN" />
				</ModelConditionState>	
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_CLOSING BUILDING_A_METAUNIT">
					<Model
						Name="NBEngFaDoorD2_SKN" />
				</ModelConditionState>				
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED">
					<Model
						Name="NBEngFaDoorsD2_SKN" />
				</ModelConditionState>	
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DAMAGED DOOR_1_OPENING BUILDING_A_METAUNIT">
					<Model
						Name="NURedmrBLDA_SKN" />
					<Texture
						Original="NBWEFacility"
						New="NBEngFaD" />						
				</ModelConditionState>					
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_OPENING BUILDING_A_METAUNIT">
					<Model
						Name="NURedmrBLDA_SKN" />
				</ModelConditionState>				
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DAMAGED">
					<Model
						Name="NBEngFaDoor_SKN" />
					<Texture
						Original="NBWEFacility"
						New="NBEngFaD" />
					<ParticleSysBone
						BoneName="FXFireBone01"
						FXParticleSystemTemplate="RedeemerDamageBlueFlashes"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFireBone01"
						FXParticleSystemTemplate="RedeemerDamageBlueSpark"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFireBone03"
						FXParticleSystemTemplate="RedeemerDamageBlueFlashes"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFireBone03"
						FXParticleSystemTemplate="RedeemerDamageBlueSpark"
						FollowBone="true" />							
					<ParticleSysBone
						BoneName="FXFireBone05"
						FXParticleSystemTemplate="RedeemerDamagedSmoke"
						FollowBone="true" />						
				</ModelConditionState>

				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DYING">
					<Model
						Name="" />
				</ModelConditionState>
				<AnimationState
					ParseCondStateType="PARSE_DEFAULT"
					Flags="START_FRAME_LAST">
					<Animation
						AnimationName="NBEngFaDoor03_CLS"
						AnimationMode="MANUAL" />
				</AnimationState>
				<!-- BUILDUP ANIMATION -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="STRUCTURE_UNPACKING">
					<Animation
						AnimationName="NBEmpty_ABLD"
						AnimationMode="ONCE" />
				</AnimationState>

				<!-- D2 ANIMATION FOR METAUNIT BUILD -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_WAITING_OPEN BUILDING_A_METAUNIT"
					Flags="START_FRAME_FIRST">
					<Animation
						AnimationName="NBEngFaDoor03D2_OPNS"
						AnimationMode="MANUAL" />
				</AnimationState>				
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_OPENING BUILDING_A_METAUNIT"
					StateName="STATE_Open">
					<Animation
						AnimationName="NURedmrBLDA_D2AAN"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXSteamBone01"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone02"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone02"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone03"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone04"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone05"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone05"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone06"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone07"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone08"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone08"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone09"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXFloorSteamCntrBone"
						FXParticleSystemTemplate="NODEngFaGroundSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone01"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone02"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone03"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone21"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone24"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone06"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone11"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone33"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone36"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />						
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_CLOSING BUILDING_A_METAUNIT"
					StateName="STATE_Closed">
					<Animation
						AnimationName="NBEngFaDoor03D2_CLS"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone01"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone02"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone03"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />						
				</AnimationState>								
				
				<!-- D2 ANIMATIONS FOR DOORS -->
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_WAITING_OPEN"
					StateName="STATE_ReallyDamagedWaitingOpen">
					<Animation
						AnimationName="NBEngFaDoor01D2_OPNS"
						AnimationMode="MANUAL" />
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_OPENING"
					StateName="STATE_ReallyDamagedOpening">
					<Animation
						AnimationName="NBEngFaDoor01D2_OPN"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXSteamBone01"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone02"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone02"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone03"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone04"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone05"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone05"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone06"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamCntrBone"
						FXParticleSystemTemplate="NODEngFaGroundSteam02"
						FollowBone="true" />	 						
				</AnimationState>	
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED DOOR_1_CLOSING"
					StateName="STATE_ReallyDamagedClosing">
					<Animation
						AnimationName="NBEngFaDoor01D2_CLS"
						AnimationMode="ONCE" />
				</AnimationState>				
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="REALLYDAMAGED"
					StateName="STATE_ReallyDamaged"
					Flags="START_FRAME_LAST">
					<Animation
						AnimationName="NBEngFaDoorsD2_AAN"
						AnimationMode="MANUAL" />
					<Script>
					Prev = CurDrawablePrevAnimationState();
					if Prev ~= "STATE_ReallyDamaged" and Prev ~= "STATE_ReallyDamagedOpening" and Prev ~= "STATE_ReallyDamagedWaitingOpen" and Prev ~= "STATE_ReallyDamagedClosing"
					and Prev ~= "TRANS_DamagedToReallyDamaged" then
						CurDrawableSetTransitionAnimState("TRANS_DamagedToReallyDamaged")
					end
				</Script> 
				</AnimationState>				
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_WAITING_OPEN BUILDING_A_METAUNIT"
					Flags="START_FRAME_FIRST">
					<Animation
						AnimationName="NBEngFaDoor03_CLS"
						AnimationMode="MANUAL" />
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_OPENING BUILDING_A_METAUNIT"
					StateName="STATE_Open">
					<Animation
						AnimationName="NURedeemer_BLDA"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXSteamBone01"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone02"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone02"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone03"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone04"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone05"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone05"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone06"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone07"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone08"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone08"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone09"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXFloorSteamCntrBone"
						FXParticleSystemTemplate="NODEngFaGroundSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone01"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone02"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone03"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone21"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone24"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone06"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone11"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone33"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="Bone36"
						FXParticleSystemTemplate="NODEngFaHoseSteam"
						FollowBone="true" />						
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_CLOSING BUILDING_A_METAUNIT"
					StateName="STATE_Closed">
					<Animation
						AnimationName="NBEngFaDoor03_CLS"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone01"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone02"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamBone03"
						FXParticleSystemTemplate="NODEngFaGroundSteam01"
						FollowBone="true" />						
				</AnimationState>				
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_WAITING_OPEN"
					Flags="START_FRAME_FIRST">
					<Animation
						AnimationName="NBEngFaDoor01_CLS"
						AnimationMode="MANUAL" />
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_OPENING"
					StateName="STATE_Open">
					<Animation
						AnimationName="NBEngFaDoor01_OPN"
						AnimationMode="ONCE" />
					<ParticleSysBone
						BoneName="FXSteamBone01"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone02"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone02"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone03"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone04"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXSteamBone05"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
						<ParticleSysBone
							BoneName="FXSteamBone05"
							FXParticleSystemTemplate="NODEngFaDoorSteam01"
							FollowBone="true" />						
					<ParticleSysBone
						BoneName="FXSteamBone06"
						FXParticleSystemTemplate="NODEngFaDoorSteam02"
						FollowBone="true" />
					<ParticleSysBone
						BoneName="FXFloorSteamCntrBone"
						FXParticleSystemTemplate="NODEngFaGroundSteam02"
						FollowBone="true" />
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_CLOSING"
					StateName="STATE_Closed">
					<Animation
						AnimationName="NBEngFaDoor01_CLS"
						AnimationMode="ONCE" />
				</AnimationState>
				<!-- Transitions 
				<AnimationState
					ParseCondStateType="PARSE_TRANSITION"
					StateName="TRANS_DamagedToReallyDamagedWhileOpen">
					<Animation
						AnimationName="NBEngFaDoor01D2_OPNS"
						AnimationMode="ONCE" />
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_TRANSITION"
					StateName="TRANS_DamagedToReallyDamagedOpening">
					<Animation
						AnimationName="NBEngFaDoor01D2_OPN"
						AnimationMode="ONCE" />
				</AnimationState>	-->			
				<AnimationState
					ParseCondStateType="PARSE_TRANSITION"
					StateName="TRANS_DamagedToReallyDamaged">
					<Animation
						AnimationName="NBEngFaDoorsD2_AAN"
						AnimationMode="ONCE" /> 
				</AnimationState>	
			</ScriptedModelDraw>

			<!-- draw a decal when this thing is selected -->
			<!-- This is duplicated in several files. Please do a search and update those too -->
			<ScriptedModelDraw
				id="ModuleTag_Draw_Selected_Repair_Decal"
				OkToChangeModelColor="true">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT">
					<Model Name="" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="SELECTED">
					<Model Name="FXInvisBone" />
					<ShadowInfo
						Type="ADDITIVE_DECAL"
						SizeX="=$REPAIR_DRONE_HOME_DECAL_SIZE"
						SizeY="=$REPAIR_DRONE_HOME_DECAL_SIZE"
						OverrideLODVisibility="true"
						MaxHeight="200"
						UseHouseColor="true"
						Texture="Decal_Rig_CO" 
					/>
				</ModelConditionState>
			</ScriptedModelDraw>
	<!-- Laser fencing -->		
			<ScriptedModelDraw
				id="ModuleTag_DrawNodWarmechEngFacilityLF"
				OkToChangeModelColor="true"
				UseStandardModelNames="true"
				StaticModelLODMode="true">
				<ModelConditionState
					ParseCondStateType="PARSE_DEFAULT" >
					<Model
						Name="" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_6 DYING">
					<Model
						Name="" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_6 REALLYDAMAGED">
					<Model
						Name="" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_6 DAMAGED">
					<Model
						Name="" />
				</ModelConditionState>
				<ModelConditionState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="USER_6">
					<Model
						Name="NBEngFac_LF" />
				</ModelConditionState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_OPENING">
					<Script>
						CurDrawableHideSubObject("Gate01")
						CurDrawableHideSubObject("Gate02")
					</Script>
				</AnimationState>
				<AnimationState
					ParseCondStateType="PARSE_NORMAL"
					ConditionsYes="DOOR_1_CLOSING"
					StateName="STATE_Closed">
					<Script>
						CurDrawableShowSubObject("Gate01")
						CurDrawableShowSubObject("Gate02")
					</Script>
				</AnimationState>
			</ScriptedModelDraw>			
		</Draws>
		<Behaviors>
			<ProductionUpdate
				id="ModuleTag_ProductionUpdate"
				GiveNoXP="true"
				Type="VEHICLE"
				NumDoorAnimations="1"
				DoorOpeningTime="2.0s"
				DoorOpeningTimeMetaUnit="7.0s"
				DoorWaitOpenTime="1.5s"
				DoorCloseTime="2.0s" />
			<QueueProductionExitUpdate
				id="ModuleTag_07"
				ExitDelay="1">
				<UnitCreatePoint
					x="0.0"
					y="0.0"
					z="0.0"/>
				<NaturalRallyPoint
					x="85.0"
					y="0.0" 
					z="0.0"/>
			</QueueProductionExitUpdate>
			<SlowDeath
				id="ModuleTag_Death"
				SinkDelay="3.0s"
				SinkRate="4.0"
				DestructionDelay="8.0s">
				<Sound Type="INITIAL" List="HumanFaction_LargeBuilding_DieMS" />
				<DieMuxData
					DeathTypes="ALL" />
			</SlowDeath>
			<FXListBehavior
				id="ModuleTag_FXList">
				<DieMuxData
					DeathTypes="ALL" />
				<Event
					Index="onTransitionToDamaged"
					FX="FX_BuildDamaged_Large" />
				<Event
					Index="onTransitionToReallyDamaged"
					FX="FX_BuildDamaged_Large" />
				<Event
					Index="onTransitionToRubble"
					FX="FX_BuildRubble_Large" />
			</FXListBehavior>
			<SpawnBehavior
				id="ModuleTag_SpawnRepairDrones"
				SpawnNumberData="3"
				InitialBurst="3"
				SpawnReplaceDelayData="10s"
				SpawnedRequireSpawner="true"
				KillSpawnsOnCaptured="true"
				SpawnInsideBuilding="true"
				KillSpawnsOnDisabled="true">
				<Die
					DeathTypes="ALL" />
				<SpawnTemplate>NODRepairDrone</SpawnTemplate>
			</SpawnBehavior>
			<AssignSlavesTargetObjectSpecialPower
				id="ModuleTag_SpecialPowerRepairVehicle"
				SpecialPowerTemplate="SpecialPower_TargetedRepairVehicle" />
			<StructureUnpackUpdate
				UnpackTime="5.0s" />
			<xi:include
				href="../../Includes/NodLaserFencingArmorUpgrade.xml" />			
			<xi:include
				href="../../Includes/NodLaserFencingStatusUpgrade.xml" />
			<xi:include
				href="../../Includes/GenericBuildingRepair.xml" />
			<xi:include
				href="../../Includes/GenericEngineerContain.xml" />
			<xi:include
				href="../../Includes/AdvancedNODBuildingDestruction.xml" />
			<xi:include
				href="../../Includes/AdvancedNODBuildingSuicide.xml" />
			<StancesBehavior
				id="ModuleTag_Stance"
				StanceTemplate="Generic" />
			<ModelConditionUpgrade
				id="ModuleTag_UpgradeLaserFencing"
				AddConditionFlags="USER_6">
				<TriggeredBy>Upgrade_LaserFencing</TriggeredBy>
			</ModelConditionUpgrade>				
				
<!-- This needs to be in every Stategic Buildings XML
            DO NOT CHANGE THE id. it must be the same in all files-->
      <MetaGameStratButtonInfo
        id="ModuleTag_MetaGameStratButtonInfo"
        MetaGameDescription="Desc:MetaNODRedeemerFacility"
        MetaGameTypeDescription="Type:MetaNODRedeemerFacility"
        >
        <!-- you can list as many powers as you want here -->

        <Powers
          Image="Portrait_Redeemer"
          Title="NAME:NODMetaUnit"
          TypeDescription="TYPE:NODMetaUnit"
          Description="DESC:BuildMetaSF"
          MetaGameOp="DETAILS_STRIKE_FORCE"
/>


      </MetaGameStratButtonInfo>
      
		</Behaviors>
		<AI>
			<AIUpdate
				id="ModuleTag_AI"
				AutoAcquireEnemiesWhenIdle="NO"
				AILuaEventsList="NODMetaUnitFunctions"></AIUpdate>
		</AI>
		<Body>
		   <ActiveBody
		    id="ModuleTag_Body"
		    MaxHealth="10000.0">
		    <DamageTrigger
		     HealthLevelBelowPercent="66"
		     RemoveUpgrade="Upgrade_LaserFencing"/>
		   </ActiveBody>
  		</Body> 
		<ClientBehaviors>
			<AnimationSoundClientBehavior id="ModuleTag_ASCB">
				<Sound Sound="NOD_WarmechFacility_SmallOpen" Animation="NBEngFaDoor01_OPN" Frame="1" />
				<Sound Sound="NOD_WarmechFacility_BigOpen" Animation="NBEngFaDoor03_OPN" Frame="1" />
				<Sound Sound="NOD_WarmechFacility_SmallClose" Animation="NBEngFaDoor01_CLS" Frame="1" />
				<Sound Sound="NOD_WarmechFacility_BigClose" Animation="NBEngFaDoor03_CLS" Frame="1" />
				<Sound Sound="NOD_WarmechFacility_SmallOpen" Animation="NBEngFaBld_AAN" Frame="1" />
				<Sound Sound="NOD_WarmechFacility_BigOpen" Animation="NBEngFaBld_AAN" Frame="80" />
				<Sound Sound="NOD_WarmechFacility_BigOpen" Animation="NURedeemer_BLDA" Frame="1" />
			</AnimationSoundClientBehavior>
		</ClientBehaviors>
		<Geometry
			IsSmall="false">
	<!-- *** Base Structure OBBOxes *** -->
			<Shape 
			     Type= "BOX"
			     MajorRadius = "35.6968"
			     MinorRadius = "41.8586"
			     Height = "4.0" >
			    <Offset
			        x = "8.75135"
			        y = "-2.6365"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "27.3684"
			     MinorRadius = "5.81579"
			     Height = "4.0" >
			    <Offset
			        x = "17.3887"
			        y = "42.3284"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "23.1663"
			     MinorRadius = "6.13053"
			     Height = "4.0" >
			    <Offset
			        x = "23.9111"
			        y = "-47.882"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "18.7368"
			     MinorRadius = "7.47368"
			     Height = "4.0" >
			    <Offset
			        x = "30.6464"
			        y = "-61.0395"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "15.5768"
			     MinorRadius = "12.6147"
			     Height = "4.0" >
			    <Offset
			        x = "29.0676"
			        y = "60.3291"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "5.05263"
			     MinorRadius = "3.89474"
			     Height = "5.26316" >
			    <Offset
			        x = "8.12037"
			        y = "52.2241"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "10.7853"
			     MinorRadius = "10.3621"
			     Height = "13.0" >
			    <Offset
			        x = "44.9808"
			        y = "-78.7231"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "11.2393"
			     MinorRadius = "11.2393"
			     Height = "13.0" >
			    <Offset
			        x = "45.7468"
			        y = "77.5498"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "10.6105"
			     MinorRadius = "29.3684"
			     Height = "4.0" >
			    <Offset
			        x = "-36.5502"
			        y = "-2.38896"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "8.8021"
			     MinorRadius = "22.2105"
			     Height = "4.0" >
			    <Offset
			        x = "-54.9767"
			        y = "-0.178446"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "9.05263"
			     MinorRadius = "13.6842"
			     Height = "4.0" >
			    <Offset
			        x = "-72.4353"
			        y = "-1.41147"
			        z = "0.0" />
			</Shape>
			<Shape 
			     Type= "BOX"
			     MajorRadius = "8.0"
			     MinorRadius = "10.4211"
			     Height = "13.0" >
			    <Offset
			        x = "-90.1195"
			        y = "-0.315782"
			        z = "0.0" />
			</Shape>
	<!-- *** Door OBBOxes *** -->		
					<Shape 
					     Type= "BOX"
					     MajorRadius = "9.7135"
					     MinorRadius = "58.1375"
					     Height = "15.0" >
					    <Offset
					        x = "28.7663"
					        y = "-0.219421"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.25666"
					     MinorRadius = "50.3307"
					     Height = "15.0" >
					    <Offset
					        x = "16.8072"
					        y = "-0.219418"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.31498"
					     MinorRadius = "40.545"
					     Height = "15.0" >
					    <Offset
					        x = "1.57152"
					        y = "-0.219425"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "10.3208"
					     MinorRadius = "32.4491"
					     Height = "15.0" >
					    <Offset
					        x = "-15.8325"
					        y = "-0.219421"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.80573"
					     MinorRadius = "24.4991"
					     Height = "15.0" >
					    <Offset
					        x = "-30.4097"
					        y = "-0.219425"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.80573"
					     MinorRadius = "15.6794"
					     Height = "15.0" >
					    <Offset
					        x = "-42.6488"
					        y = "-0.219425"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "9.78687"
					     MinorRadius = "11.6498"
					     Height = "15.0" >
					    <Offset
					        x = "-57.2744"
					        y = "-0.496896"
					        z = "0.0" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.2565"
					     MinorRadius = "47.311"
					     Height = "15.0" >
					    <Offset
					        x = "22.7027"
					        y = "-0.219425"
					        z = "12.4364" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.31498"
					     MinorRadius = "36.6682"
					     Height = "15.0" >
					    <Offset
					        x = "7.46705"
					        y = "-0.219421"
					        z = "12.4364" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "10.3208"
					     MinorRadius = "27.629"
					     Height = "15.0" >
					    <Offset
					        x = "-9.93699"
					        y = "-0.219419"
					        z = "12.4364" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.80573"
					     MinorRadius = "19.8376"
					     Height = "15.0" >
					    <Offset
					        x = "-24.5142"
					        y = "-0.219423"
					        z = "12.4364" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "13.1632"
					     MinorRadius = "11.3673"
					     Height = "15.0" >
					    <Offset
					        x = "-43.6901"
					        y = "-0.219423"
					        z = "12.4364" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.2565"
					     MinorRadius = "34.0639"
					     Height = "15.0" >
					    <Offset
					        x = "16.2401"
					        y = "-0.219421"
					        z = "26.4713" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.31498"
					     MinorRadius = "26.0344"
					     Height = "15.0" >
					    <Offset
					        x = "1.00438"
					        y = "-0.219421"
					        z = "26.4713" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "10.3208"
					     MinorRadius = "16.8537"
					     Height = "15.0" >
					    <Offset
					        x = "-16.3997"
					        y = "-0.219419"
					        z = "26.4713" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "10.3291"
					     MinorRadius = "10.3156"
					     Height = "15.0" >
					    <Offset
					        x = "-32.8184"
					        y = "-0.219421"
					        z = "26.4713" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "7.18315"
					     MinorRadius = "24.8667"
					     Height = "15.0" >
					    <Offset
					        x = "9.9189"
					        y = "-0.219419"
					        z = "40.2592" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.31498"
					     MinorRadius = "19.2655"
					     Height = "15.0" >
					    <Offset
					        x = "-4.31637"
					        y = "-0.219425"
					        z = "40.2592" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "10.3208"
					     MinorRadius = "10.7864"
					     Height = "15.0" >
					    <Offset
					        x = "-21.7204"
					        y = "-0.219421"
					        z = "40.2592" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "12.8051"
					     MinorRadius = "12.892"
					     Height = "7.5" >
					    <Offset
					        x = "-3.28932"
					        y = "0.0807571"
					        z = "55.8636" />
					</Shape>
					
			<!--	kschaefer@ea.com - having collision under ground causes problems with attacking
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.19838"
					     MinorRadius = "5.36437"
					     Height = "78.2591" >
					    <Offset
					        x = "23.0314"
					        y = "-41.5009"
					        z = "-72.6178" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "8.19838"
					     MinorRadius = "5.36437"
					     Height = "78.2591" >
					    <Offset
					        x = "23.0314"
					        y = "40.7456"
					        z = "-72.6178" />
					</Shape>
					<Shape 
					     Type= "BOX"
					     MajorRadius = "3.19737"
					     MinorRadius = "9.60222"
					     Height = "78.2591" >
					    <Offset
					        x = "-48.2257"
					        y = "-0.379747"
					        z = "-72.6178" />
					</Shape>
							 
				-->
			
					<ContactPoint>
						<Pos x= "23.0314" y = "-41.5009" z = "20.0" />
					</ContactPoint>
					<ContactPoint>
						<Pos x= "23.0314" y = "-0.37765" z = "10.0" />
					</ContactPoint>
					<ContactPoint>
						<Pos x= "23.0314" y = "40.7456" z = "20.0" />
					</ContactPoint>
					<ContactPoint>
						<Pos x= "-12.59715" y = "20.18293" z = "10.0" />
					</ContactPoint>
					<ContactPoint>
						<Pos x= "-48.2257" y = "-0.379747" z = "20.0" />
					</ContactPoint>
					<ContactPoint>
						<Pos x= "-12.59715" y = "-20.9403235" z = "10.0" />
					</ContactPoint>


			</Geometry>
		<AudioArrayVoice>
			<AudioEntry
				Sound="NOD_WarmechFacility_Select"
				AudioType="voiceSelect" />
		</AudioArrayVoice>
		<AudioArraySound>
			<AudioEntry Sound="HumanFaction_LargeBuilding_LightDamage_MS" AudioType="soundOnDamaged" />
			<AudioEntry Sound="HumanFaction_LargeBuilding_HeavyDamage_MS" AudioType="soundOnReallyDamaged" />
		</AudioArraySound>
		<ShadowInfo
			Type="VOLUME" />
		<VisionInfo
			VisionRange="100"
			ShroudClearingRange="400" />
		<ProjectedBuildabilityInfo
			Radius="250"
			BuildPlacementTypes="MAIN_STRUCTURE OTHER_STRUCTURE" />
	</GameObject>
</AssetDeclaration>